!function(){var t,s;window.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){t=setTimeout(e,1e3/60)};var a="SPIRAL",i="EXPLOSION",R=!1,g={spiral:[{omega:.09,isOmegaResRandom:!0,omegaResistance:1e-5,radiusResistance:20,thetaResistanceX:.02,thetaResistanceY:.02,particleRad:3,particleOp:1,fillStyleOp:.07,particleCount:100},{omega:.09,isOmegaResRandom:!1,omegaResistance:1e-5,radiusResistance:20,thetaResistanceX:.02,thetaResistanceY:.02,particleRad:3,particleOp:1,fillStyleOp:.07,particleCount:100},{omega:.09,isOmegaResRandom:!1,omegaResistance:5,radiusResistance:10,thetaResistanceX:.02,thetaResistanceY:.02,particleRad:3,particleOp:1,fillStyleOp:.07,particleCount:60},{omega:.009,isOmegaResRandom:!1,omegaResistance:.001,radiusResistance:20,thetaResistanceX:.02,thetaResistanceY:.02,particleRad:3,particleOp:1,fillStyleOp:.07,particleCount:100},{omega:.009,isOmegaResRandom:!1,omegaResistance:.001,radiusResistance:20,thetaResistanceX:.05,thetaResistanceY:.01,particleRad:3,particleOp:1,fillStyleOp:.07,particleCount:100},{omega:.05,isOmegaResRandom:!1,omegaResistance:9e-5,radiusResistance:20,thetaResistanceX:.02,thetaResistanceY:.02,particleRad:3,particleOp:1,fillStyleOp:.07,particleCount:100},{omega:.09,isOmegaResRandom:!1,omegaResistance:.001,radiusResistance:20,thetaResistanceX:.02,thetaResistanceY:.02,particleRad:3,particleOp:1,fillStyleOp:.07,particleCount:100},{omega:.09,isOmegaResRandom:!1,omegaResistance:.005,radiusResistance:20,thetaResistanceX:.02,thetaResistanceY:.02,particleRad:3,particleOp:1,fillStyleOp:.07,particleCount:100}]},n=["c96332","ec9e14","f1e4da","00a2e4"],l=m(n),o=["SPIRAL","EXPLOSION"][Math.floor(2*Math.random())],p=Math.floor(Math.random()*g.spiral.length),u=document.getElementById("myCanvas"),r=u.getContext("2d");function h(e,t){var a;a=l[Math.floor(Math.random()*l.length)]||"0,255,56";for(var i=0;i<e.length;i++)t.beginPath(),t.arc(e[i].x,e[i].y,e[i].radius,0,2*Math.PI),t.fillStyle="rgba("+a+", "+e[i].opacity+")",t.fill(),t.closePath()}function c(e){e=e.replace("#","");return parseInt(e.substring(0,2),16)+", "+parseInt(e.substring(2,4),16)+", "+parseInt(e.substring(4,6),16)}function m(e){for(var t=[],a=0;a<e.length;a++)t.push(c(e[a]));return t}function f(e,t,a,i){if(R){for(var n=0;n<e.length;n++){var s,l=((new Date).getTime()-i)/2;s=g.spiral[p].isOmegaResRandom?g.spiral[p].omega-n*Math.random()*g.spiral[p].omegaResistance:g.spiral[p].omega-n*g.spiral[p].omegaResistance;var o=t.width/2-n*g.spiral[p].radiusResistance,r=t.width/2,c=t.height/2,m=l*s,u=o*Math.cos(m-n*g.spiral[p].thetaResistanceX)+r,d=o*Math.sin(m-n*g.spiral[p].thetaResistanceY)+c;e[n].x=u,e[n].y=d}a.fillStyle="rgba(0, 0, 0, "+g.spiral[p].fillStyleOp+")",a.fillRect(0,0,t.width,t.height),h(e,a),requestAnimFrame(function(){f(e,t,a,i)})}}function d(e,t,a,i){for(var n=0;n<e.length;n++){var s=.01*((new Date).getTime()-i+1),l=s*Math.cos(e[n].theta)+e[n].x,o=s*Math.sin(e[n].theta)+e[n].y;e[n].x=l,e[n].y=o,e[n].radius-=.12}a.fillStyle="rgba(0, 0, 0, 0.5)",h(e,a),requestAnimFrame(function(){d(e,t,a,i)})}function y(t,a,i,n){s=setTimeout(function(){R=!0;var e=(new Date).getTime();t(a,i,n,e)},1e3)}function O(){var e;r.fillStyle="rgba(0, 0, 0)",r.fillRect(0,0,u.width,u.height),o===a?(function(e){document.getElementById("omega").value=e.omega,document.getElementById("isOmegaResRandom").value=e.isOmegaResRandom,document.getElementById("omegaResistance").value=e.omegaResistance,document.getElementById("radiusResistance").value=e.radiusResistance,document.getElementById("thetaResistanceX").value=e.thetaResistanceX,document.getElementById("thetaResistanceY").value=e.thetaResistanceY,document.getElementById("particleRad").value=e.particleRad,document.getElementById("particleOp").value=e.particleOp,document.getElementById("fillStyleOp").value=e.fillStyleOp,document.getElementById("particleCount").value=e.particleCount}(g.spiral[p]),h(e=function(e,t,a,i){var n=[],s={};t=i?Math.floor(Math.random()*t)+4:t,a=i?Math.floor(Math.random()*a):a;for(var l=0;l<e;l++)s={x:u.width/2,y:u.height/2,radius:t||10,opacity:a||1},n.push(s);return n}(g.spiral[p].particleCount,g.spiral[p].particleRad,g.spiral[p].particleOp,!1),r),y(f,e,u,r)):o===i&&(h(e=function(e,t,a,i){var n=0,s=[],l={},o=u.width/50,r=u.width/2,c=u.height/2;t=i?Math.floor(Math.random()*t)+1:t,a=i?Math.floor(Math.random()*a):a;for(var m=0;m<e;m++)l={x:o*Math.cos(n)+r,y:o*Math.sin(n)+c,radius:t||10,opacity:a||1,theta:n},s.push(l),n+=2*Math.PI/e;return s}(100,10,1,!1),r),y(d,e,u,r))}window.changeSetting=function(){var e={omega:Number(document.getElementById("omega").value)||0,isOmegaResRandom:Number(document.getElementById("isOmegaResRandom").value)||0,omegaResistance:Number(document.getElementById("omegaResistance").value)||0,radiusResistance:Number(document.getElementById("radiusResistance").value)||0,thetaResistanceX:Number(document.getElementById("thetaResistanceX").value)||0,thetaResistanceY:Number(document.getElementById("thetaResistanceY").value)||0,particleRad:Number(document.getElementById("particleRad").value)||0,particleOp:Number(document.getElementById("particleOp").value)||0,fillStyleOp:Number(document.getElementById("fillStyleOp").value)||0,particleCount:Number(document.getElementById("particleCount").value)||0};l=m(n),g={spiral:[e]},p=0,clearTimeout(t),clearTimeout(s),R=!1,setTimeout(function(){O()},1e3)},window.addColor=function(){n.push(document.getElementById("favcolor")&&document.getElementById("favcolor").value||"#ffffff"),document.getElementById("fcolor").innerHTML+=","+n[n.length-1]},window.clearColor=function(){n=[],document.getElementById("fcolor").innerHTML="",document.getElementById("favcolor").valueOf=""},window.downloadImg=function(){!function(e){window.open().document.write('<img src="'+e+'">')}(u.toDataURL("image/png",1))},O()}();